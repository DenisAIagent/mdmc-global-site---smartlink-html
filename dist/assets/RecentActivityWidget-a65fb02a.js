import{e as T,c as e,v as A,T as f,d as s,S as u,bs as S,a5 as D,I as P,bI as I,R as J,l as w,B as v,aX as _,g as H,aY as F,bH as R,n as $,al as N,X as V,bD as E,ax as x,r as g,M as X,J as O,bJ as q,Q as Y,O as B}from"./ui-8fe63d91.js";import{r as j,b as Q}from"./vendor-73f70a13.js";import{V as U}from"./index-3e5c358d.js";import{g as C,h as M,i as G,j as y,k as K}from"./utils-b8a29b2a.js";import"./router-d3a551c4.js";import"./i18n-757038dc.js";import"./analytics-f0f53c8f.js";import"./forms-769d622f.js";var Z={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},ee=function(t,o,r){var n,d=Z[t];return typeof d=="string"?n=d:o===1?n=d.one:n=d.other.replace("{{count}}",String(o)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"dans "+n:"il y a "+n:n};const te=ee;var ae={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},re={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},ie={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ne={date:C({formats:ae,defaultWidth:"full"}),time:C({formats:re,defaultWidth:"full"}),dateTime:C({formats:ie,defaultWidth:"full"})};const oe=ne;var se={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},le=function(t,o,r,n){return se[t]};const de=le;var me={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},ce={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},ue={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},he={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},fe={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},ve=function(t,o){var r=Number(t),n=o==null?void 0:o.unit;if(r===0)return"0";var d=["year","week","hour","minute","second"],i;return r===1?i=n&&d.includes(n)?"ère":"er":i="ème",r+i},pe={ordinalNumber:ve,era:M({values:me,defaultWidth:"wide"}),quarter:M({values:ce,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:M({values:ue,defaultWidth:"wide"}),day:M({values:he,defaultWidth:"wide"}),dayPeriod:M({values:fe,defaultWidth:"wide"})};const be=pe;var ge=/^(\d+)(ième|ère|ème|er|e)?/i,Me=/\d+/i,ye={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},we={any:[/^av/i,/^ap/i]},ke={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},xe={any:[/1/i,/2/i,/3/i,/4/i]},Ce={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},Pe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},je={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},We={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},Ae={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},Se={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},De={ordinalNumber:G({matchPattern:ge,parsePattern:Me,valueCallback:function(t){return parseInt(t)}}),era:y({matchPatterns:ye,defaultMatchWidth:"wide",parsePatterns:we,defaultParseWidth:"any"}),quarter:y({matchPatterns:ke,defaultMatchWidth:"wide",parsePatterns:xe,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:y({matchPatterns:Ce,defaultMatchWidth:"wide",parsePatterns:Pe,defaultParseWidth:"any"}),day:y({matchPatterns:je,defaultMatchWidth:"wide",parsePatterns:We,defaultParseWidth:"any"}),dayPeriod:y({matchPatterns:Ae,defaultMatchWidth:"any",parsePatterns:Se,defaultParseWidth:"any"})};const Te=De;var ze={code:"fr",formatDistance:te,formatLong:oe,formatRelative:de,localize:be,match:Te,options:{weekStartsOn:1,firstWeekContainsDate:4}};const Le=ze,W={smartlink_created:{icon:e(X,{}),color:"#10b981",label:"SmartLink créé"},traffic_spike:{icon:e(O,{}),color:"#f59e0b",label:"Pic de trafic"},artist_added:{icon:e(q,{}),color:"#6366f1",label:"Artiste ajouté"},campaign_launched:{icon:e(Y,{}),color:"#8b5cf6",label:"Campagne lancée"},milestone_reached:{icon:e(B,{}),color:"#06b6d4",label:"Objectif atteint"}},Ie=(a=10)=>{const t=[],o=Object.keys(W);for(let r=0;r<a;r++){const n=o[Math.floor(Math.random()*o.length)],d=Math.floor(Math.random()*24*7);let i={id:`activity_${r}`,type:n,timestamp:new Date(Date.now()-d*60*60*1e3),priority:Math.random()>.7?"high":Math.random()>.4?"medium":"low"};switch(n){case"smartlink_created":i={...i,title:"Nouveau SmartLink créé",subtitle:`${["Purple Disco Machine","Lost Frequencies","David Guetta","Calvin Harris"][Math.floor(Math.random()*4)]} - "${["Hypnotized","Reality","Titanium","Summer"][Math.floor(Math.random()*4)]}"`,metadata:{artist:"Purple Disco Machine",track:"Hypnotized",platforms:12}};break;case"traffic_spike":const h=["+234%","+156%","+89%","+345%"];i={...i,title:"Pic de trafic détecté",subtitle:`${(Math.random()*2e3+500).toFixed(0)} vues en 1h (${h[Math.floor(Math.random()*h.length)]})`,metadata:{increase:h[Math.floor(Math.random()*h.length)],views:Math.floor(Math.random()*2e3+500)}};break;case"artist_added":const l=["The Weeknd","Dua Lipa","Billie Eilish","Post Malone"];i={...i,title:"Nouvel artiste ajouté",subtitle:`${l[Math.floor(Math.random()*l.length)]} ajouté au portfolio`,metadata:{artist:l[Math.floor(Math.random()*l.length)],genre:"Pop"}};break;case"campaign_launched":i={...i,title:"Campagne publicitaire lancée",subtitle:`Budget ${Math.floor(Math.random()*500+100)}€ sur Meta Ads`,metadata:{budget:Math.floor(Math.random()*500+100),platform:"Meta Ads"}};break;case"milestone_reached":const m=["10k clics","50k vues","100 SmartLinks","25 artistes"];i={...i,title:"Objectif atteint",subtitle:`Félicitations ! ${m[Math.floor(Math.random()*m.length)]} atteint`,metadata:{milestone:m[Math.floor(Math.random()*m.length)]}};break}t.push(i)}return t.sort((r,n)=>n.timestamp-r.timestamp)},Je=({activity:a,showActions:t=!0,compact:o=!1})=>{const r=T(),[n,d]=j.useState(null),i=W[a.type]||W.smartlink_created,h=c=>{c.preventDefault(),d(c.currentTarget)},l=()=>{d(null)},m=c=>{console.log(`Action ${c} sur activité:`,a.id),l()},p=c=>{try{return K(c,{addSuffix:!0,locale:Le})}catch{return"Il y a quelques instants"}};return s(F,{sx:{bgcolor:"background.paper",border:1,borderColor:"divider",borderRadius:1,mb:1,transition:"all 0.2s ease","&:hover":{bgcolor:"action.hover",transform:"translateX(2px)"},...a.priority==="high"&&{borderLeftColor:r.palette.error.main,borderLeftWidth:4}},children:[e(R,{children:e($,{sx:{bgcolor:i.color,width:o?32:40,height:o?32:40},children:i.icon})}),e(N,{primary:s(u,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e(f,{variant:o?"body2":"subtitle2",sx:{fontWeight:600},children:a.title}),s(u,{direction:"row",alignItems:"center",spacing:1,children:[a.priority==="high"&&e(w,{label:"Important",size:"small",color:"error",variant:"outlined"}),e(f,{variant:"caption",color:"text.secondary",children:p(a.timestamp)})]})]}),secondary:s(v,{sx:{mt:.5},children:[e(f,{variant:"body2",color:"text.secondary",sx:{mb:o?0:1},children:a.subtitle}),!o&&a.metadata&&e(u,{direction:"row",spacing:1,flexWrap:"wrap",children:e(w,{label:i.label,size:"small",variant:"outlined",sx:{bgcolor:i.color+"10",borderColor:i.color+"30"}})})]})}),t&&!o&&s(v,{sx:{ml:1},children:[e(P,{size:"small",onClick:h,children:e(V,{fontSize:"small"})}),s(E,{anchorEl:n,open:!!n,onClose:l,children:[e(x,{onClick:()=>m("view"),children:"Voir détails"}),e(x,{onClick:()=>m("share"),children:"Partager"}),a.type==="smartlink_created"&&e(x,{onClick:()=>m("edit"),children:"Modifier SmartLink"})]})]})]})},_e=({count:a=5,compact:t=!1})=>e(u,{spacing:1,children:Array.from({length:a}).map((o,r)=>e(v,{sx:{p:2,border:1,borderColor:"divider",borderRadius:1},children:s(u,{direction:"row",spacing:2,alignItems:"center",children:[e(g,{variant:"circular",width:t?32:40,height:t?32:40}),s(v,{sx:{flex:1},children:[e(g,{variant:"text",width:"80%",height:t?16:20}),e(g,{variant:"text",width:"60%",height:t?14:16}),!t&&e(g,{variant:"rectangular",width:80,height:20,sx:{mt:1}})]}),e(g,{variant:"text",width:60,height:16})]})},r))}),Oe=({limit:a=5,compact:t=!1,widgetId:o,isEditing:r=!1,title:n="Activité récente"})=>{T();const{data:d,isLoading:i,error:h}=U(),[l,m]=j.useState("all"),[p]=j.useState(()=>Ie(20)),c=Q.useMemo(()=>{let b=p;return l==="high"?b=p.filter(k=>k.priority==="high"):l==="smartlinks"&&(b=p.filter(k=>k.type==="smartlink_created")),b.slice(0,a)},[p,l,a]),z=()=>{console.log("Rafraîchissement activités...")},L=()=>{console.log("Navigation vers toutes les activités")};return h?e(A,{sx:{p:2,height:"100%",minHeight:t?200:280},children:e(f,{color:"error",variant:"body2",children:"Erreur de chargement des activités"})}):s(A,{sx:{p:2,height:"100%",minHeight:t?200:280,display:"flex",flexDirection:"column",...r&&{cursor:"move","&:hover":{bgcolor:"action.hover"}}},children:[s(u,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:2},children:[s(u,{direction:"row",alignItems:"center",spacing:1,children:[e(S,{color:"primary"}),e(f,{variant:"h6",sx:{fontWeight:600},children:n})]}),s(u,{direction:"row",spacing:1,children:[e(D,{title:"Filtrer",children:e(P,{size:"small",children:e(I,{fontSize:"small"})})}),e(D,{title:"Actualiser",children:e(P,{size:"small",onClick:z,children:e(J,{fontSize:"small"})})})]})]}),!t&&s(u,{direction:"row",spacing:1,sx:{mb:2},children:[e(w,{label:"Tout",size:"small",color:l==="all"?"primary":"default",onClick:()=>m("all"),clickable:!0}),e(w,{label:"Important",size:"small",color:l==="high"?"error":"default",onClick:()=>m("high"),clickable:!0}),e(w,{label:"SmartLinks",size:"small",color:l==="smartlinks"?"secondary":"default",onClick:()=>m("smartlinks"),clickable:!0})]}),e(v,{sx:{flex:1,overflowY:"auto"},children:i?e(_e,{count:a,compact:t}):c.length===0?s(v,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:t?100:150,color:"text.secondary"},children:[e(S,{sx:{fontSize:48,mb:1,opacity:.5}}),e(f,{variant:"body2",children:"Aucune activité récente"})]}):e(_,{sx:{p:0},children:c.map(b=>e(Je,{activity:b,showActions:!r&&!t,compact:t},b.id))})}),e(v,{sx:{mt:2,pt:2,borderTop:1,borderColor:"divider"},children:s(u,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[s(f,{variant:"caption",color:"text.secondary",children:[c.length," activités"]}),e(H,{size:"small",onClick:L,disabled:c.length===0,children:"Voir tout"})]})}),!1]})};export{Oe as default};
//# sourceMappingURL=RecentActivityWidget-a65fb02a.js.map
